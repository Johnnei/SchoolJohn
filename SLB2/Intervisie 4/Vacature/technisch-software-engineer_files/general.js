var preloadImages={},idCache={},regExpCache={};if(!window.ImgURL)var ImgURL='';if(window.debug)window.alert=function(alert){if(!confirm(alert))throw'stopped'}
function computedStyle(el,property){var style=false;if(el)if(window.getComputedStyle){style=window.getComputedStyle(el,null).getPropertyValue(property)}else if(el.currentStyle)style=el.currentStyle[property.replace(/-([a-z])/,function($0,$1){return $1.toUpperCase()})];return style};var is=(function(o,u){if((o.ie=/*@cc_on !@*/false)){o.ieVersion=(function(v,p){while(p.innerHTML='<!--[if gt IE '+(++v)+']>1<![endif]-->',p.innerHTML>0);if(v>5)return v})(4,document.createElement('p'));if(o.ieVersion<7)try{document.execCommand('BackgroundImageCache',false,true)}catch(e){}}else{o={opera:!!window.opera,khtml:u.indexOf('KHTML')>-1,webkit:u.indexOf('AppleWebKit/')>-1,mac:u.indexOf('Macintosh')>-1};if(o.mac&&o.webkit)window.focus=function(){}};o.handheld=computedStyle(document.documentElement,'z-index')==1;return o})({},navigator.userAgent),isEventSupported=(function(){var TAGNAMES={select:'input',change:'input',submit:'form',reset:'form',error:'img',load:'img',abort:'img'},cache={};return function(eventName,element){var canCache=arguments.length==1,isSupported;if(canCache&&eventName in cache)return cache[eventName];element=element||document.createElement(TAGNAMES[eventName]||'div');eventName='on'+eventName;if(!(isSupported=eventName in element)&&element.setAttribute){element.setAttribute(eventName,'return;');isSupported=typeof element[eventName]=='function'};return canCache?(cache[eventName]=isSupported):isSupported}})()
function preload(label,url,overwrite){if(overwrite||!(label in preloadImages)){if(!/^(https?|data):/.test(url))url=ImgURL+url;preloadImages[label]=new Image();preloadImages[label].src=url}}
function getPreloadImage(label){if(label in preloadImages){return preloadImages[label].src}else if(label!='empty'){preload('empty','g/px.gif');return getPreloadImage('empty')}else return ImgURL+'g/px.gif'}
function loadImage(src,callback){var loaded=false,img=new Image(),doCallback=function(result){loaded=!!result;img.onload=img.onerror=img.onabort=null;callback(result);img=null},loadCheck=function(){if(!loaded&&(img.width||img.complete))doCallback(img);return loaded};img.onload=function(){if(!loadCheck())doCallback(false)};img.onerror=img.onabort=function(){doCallback(false)};if(is.opera)setTimeout(loadCheck,100);return img.src=src}
function imgHoverOn(){if(this.__hoverStateImg)this.src=getPreloadImage(this.__hoverStateImg)}
function imgHoverOff(){if(this.__normalStateImg)this.src=getPreloadImage(this.__normalStateImg)}
function imageHoverSwap(img,normalStateImg,hoverStateImg){img.src=getPreloadImage(normalStateImg);if(!img.__hoverStateImg){addEvent(img,'mouseover',imgHoverOn);addEvent(img,'mouseout',imgHoverOff)};img.__hoverStateImg=hoverStateImg;img.__normalStateImg=normalStateImg};Object.extend=function(dest,source,allowOverwrite){for(var prop in source)if(source.hasOwnProperty(prop)&&(allowOverwrite||!dest.hasOwnProperty(prop)))dest[prop]=source[prop];return dest};Object.extend(Array.prototype,{indexOf:function(searchElement,fromIndex){var l=this.length,i=0;if(fromIndex){i=fromIndex;if(i<0){i+=l;if(i<0)i=0}};while(i<l){if(this[i]===searchElement)return i;i++};return-1},forEach:function(func,obj){for(var i=0,l=this.length;i<l;i++)if(i in this)func.call(obj,this[i],i,this)},filter:function(func,obj){var res=[],val;for(var i=0,l=this.length;i<l;i++)if(i in this){val=this[i];if(func.call(obj,val,i,this))res.push(val)};return res}});['forEach','filter','slice'].forEach(function(func){if(!(func in Array))Array[func]=function(obj){return this.prototype[func].apply(obj,Array.prototype.slice.call(arguments,1))}});Object.extend(String.prototype,{trim:function(){return this.replace(/^\s\s*/,'').replace(/\s\s*$/,'')},ucFirst:function(){return this.charAt(0).toUpperCase()+this.substr(1)},escapeHtml:function(){var escapeChars={'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;'};return this.replace(/[&<>"]/g,function(c){return escapeChars[c]})},unescapeHtml:function(){var namedEntities={amp:'&',lt:'<',gt:'>',quot:'"',euro:String.fromCharCode(8364)};return this.replace(/&(amp|lt|gt|quot|euro|#\d+);/g,function(c,n){return namedEntities[n]||String.fromCharCode(n.substr(1))})},normalize:function(){var diacritics={192:'A',193:'A',194:'A',195:'A',196:'A',197:'A',198:'A',224:'a',225:'a',226:'a',227:'a',228:'a',229:'a',230:'a',200:'E',201:'E',202:'E',203:'E',232:'e',233:'e',234:'e',235:'e',204:'I',205:'I',206:'I',207:'I',236:'i',237:'i',238:'i',239:'i',210:'O',211:'O',212:'O',213:'O',214:'O',216:'O',242:'o',243:'o',244:'o',245:'o',246:'o',248:'o',217:'U',218:'U',219:'U',220:'U',249:'u',250:'u',251:'u',252:'u',209:'N',241:'n',199:'C',231:'c',221:'Y',253:'y'};return this.replace(/[\300-\377]/g,function(c){return diacritics[c.charCodeAt(0)]||c})},escapeJs:function(){return this.replace(/([\0\n\r\t\\'\/])/g,'\\$1')}});Object.extend(Function.prototype,{bind:function(obj){var fn=this,args;if(arguments.length>1){args=Array.slice(arguments,1);return function(){return arguments.length?fn.apply(obj,args.concat(Array.slice(arguments))):fn.apply(obj,args)}};return function(){return arguments.length?fn.apply(obj,arguments):fn.call(obj)}}});RegExp.escape=function(string){return string.replace(/([.*+?^${}()|[\]\/\\])/g,'\\$1')}
function Set(){var set={},i=arguments.length;while(i--)set[arguments[i]]=1;return set}
function getById(id){if(!(id in idCache))idCache[id]=document.getElementById(id);return idCache[id]};var globalEval=(function(org,Object){try{if((1,eval)('Object')===org)return function(expr){return(1,eval)(expr)}}catch(e){};if(typeof window.execScript!=='undefined')return function(expr){return window.execScript(expr)};return function(){}})(Object,2),DomLoaded={onload:[],loaded:function(){if(DomLoaded.done)return;DomLoaded.done=true;if(DomLoaded.timer)clearInterval(DomLoaded.timer);if(DomLoaded.onload.length)DomLoaded.execute()},load:function(fireThis){DomLoaded.onload.push(fireThis);if(DomLoaded.onload.length==1){if(document.addEventListener){document.addEventListener('DOMContentLoaded',DomLoaded.loaded,false);if(is.webkit||is.khtml)DomLoaded.timer=setInterval(function(){if(/loaded|complete/.test(document.readyState))DomLoaded.loaded()},10)}else DomLoaded.timer=setInterval(function(){if(document.getElementById('domLoaded'))DomLoaded.loaded()},10);addEvent(window,'load',DomLoaded.loaded)}},execute:function(){var func=DomLoaded.onload.shift();if(typeof func=='function')func();if(DomLoaded.onload.length)setTimeout(DomLoaded.execute,10)}},addEvent=function(){if(document.addEventListener){var ieMouseEventMapping={mouseenter:'mouseover',mouseleave:'mouseout'};function checkMouseLeaveOrEnter(element,handler){return function(e){var target=e.relatedTarget||(e.type=='mouseover'?e.fromElement:e.toElement);while(target){if(target==element)return;try{target=target.parentNode}catch(e){return}};return handler.call(this,e)}};return function(element,type,handler){if(type in ieMouseEventMapping&&!isEventSupported(type)){type=ieMouseEventMapping[type];handler=checkMouseLeaveOrEnter(element,handler)};element.addEventListener(type,handler,false)}}else{function handleEvent(event){event=event||fixEvent(window.event);if(event.type=='resize'){var page=getPageDimensions(),currentDimensions=page.innerWidth+'x'+page.innerHeight;if(this.__dimensions&&this.__dimensions==currentDimensions)return true;this.__dimensions=currentDimensions};var handlers=this.events[event.type],returnValue;for(var i in handlers)if(handlers.hasOwnProperty(i)&&handlers[i].call(this,event)===false)returnValue=false;return returnValue};function fixEvent(event){event.preventDefault=preventDefault;event.stopPropagation=stopPropagation;event.target=event.srcElement;return event};function preventDefault(){this.returnValue=false};function stopPropagation(){this.cancelBubble=true};function removeAllEvents(){while((cachedEvent=eventCache.pop()))removeEvent(cachedEvent.element,cachedEvent.type,cachedEvent.handler);if(window.idCache)window.idCache=null};var guid=1,eventCache=[];return function(element,type,handler){if(!handler.$$guid)handler.$$guid=guid++;if(!element.events)element.events={};if(!element.events[type]){element.events[type]={};if(element['on'+type])element.events[type][0]=element['on'+type];element['on'+type]=handleEvent};element.events[type][handler.$$guid]=handler;if(type!='unload'){if(!eventCache.length)addEvent(window,'unload',removeAllEvents);eventCache.push({element:element,type:type,handler:handler})}}}}(),removeEvent=function(){if(document.removeEventListener){return function(element,type,handler){element.removeEventListener(type,handler,false)}}else return function(element,type,handler){if(element.events&&element.events[type]&&handler.$$guid)delete element.events[type][handler.$$guid]}}(),addCleanupHandler=function(){if(is.ie){var cleanupItems=[];function cleanUp(){var i=cleanupItems.length,j;while(i--)if(cleanupItems[i].obj){if(cleanupItems[i].func)try{if(typeof cleanupItems[i].func=='function'){cleanupItems[i].func.call(obj)}else cleanupItems[i].obj[cleanupItems[i].func]()}catch(e){};j=cleanupItems[i].props.length;while(j--)cleanupItems[i].obj[cleanupItems[i].props[j]]=null};cleanupItems=null};return function(obj,props,func){var l=cleanupItems.length;cleanupItems[l]={obj:obj,props:props,func:func};if(l==0)addEvent(window,'unload',cleanUp)}};return function(){}}()
function getHead(){if(is.ie){var bases=document.getElementsByTagName('base');if(bases.length&&bases[0].childNodes.length)return bases[0]};return document.getElementsByTagName('head')[0]}
function hasAttribute(el,attr){if(el.hasAttribute)return el.hasAttribute(attr);if(attr=='class'){attr='className'}else if(attr=='for')attr='htmlFor';var node=el.getAttributeNode(attr);return node&&node.specified}
function getQueryString(form,nojoin){var elements=form.elements,element,qName,qValues,qParts=[],i,j,k,o;for(i=0;i<elements.length;i++){element=elements[i];if(element.name&&!element.disabled){qValues=[];switch(element.nodeName.toLowerCase()){case'input':k=element.type.toLowerCase();if((k=='checkbox'||k=='radio')&&!element.checked)break;case'textarea':qValues.push(element.value);break;case'select':k=element.options,o=[];if(element.multiple){for(j=0;j<k.length;j++)if(k[j].selected)o.push(k[j])}else if(k[element.selectedIndex])o.push(k[element.selectedIndex]);for(j=0;j<o.length;j++)qValues.push(hasAttribute(o[j],'value')?o[j].value:o[j].text);break};if((k=qValues.length)){qName=encodeURIComponent(element.name);for(j=0;j<k;j++)qParts.push(qName+'='+encodeURIComponent(qValues[j]))}}};return nojoin?qParts:qParts.join('&')}
function getSelectedValue(element){if(element.nodeName){if(element.nodeName.toLowerCase()=='select'){return element.options[element.selectedIndex].value}else return element.value}else if(element.length)for(var i=0;i<element.length;i++)if(element[i].checked)return element[i].value;return null}
function HTMLBuilder(newInstance){if(this==window)return new HTMLBuilder();if(HTMLBuilder.instance&&!newInstance)return HTMLBuilder.instance;this.idList={};this.eventHandlers=Set('onblur','onchange','onclick','ondblclick','onfocus','onkeydown','onkeypress','onkeyup','onload','onmousedown','onmousemove','onmouseout','onmouseover','onmouseup','onreset','onselect','onsubmit','onunload');this.oldIECompat=is.ie;if(!newInstance)HTMLBuilder.instance=this;return this};Object.extend(HTMLBuilder.prototype,{built:function(object){this.idList={};return this.builtRecursive(object)},builtRecursive:function(object){var element=null,attribute,value,children,childNode,i;if(object.nodeType)return object;if(object.o)return object.o;if(object.n)if(object.n=='#document-fragment'){element=document.createDocumentFragment()}else if(object.n=='#text'){element=document.createTextNode(object.v||'')}else{if(this.oldIECompat&&object.a&&'name'in object.a)try{element=document.createElement('<'+object.n+' name='+object.a['name']+'>');delete object.a['name']}catch(e){this.oldIECompat=false};if(element||(element=document.createElement(object.n))){if(object.a)for(attribute in object.a){value=object.a[attribute];if(value!==null&&object.a.hasOwnProperty(attribute))if(attribute in this.eventHandlers&&typeof value!='function'){element[attribute]=new Function(value)}else if(attribute=='style'){element.style.cssText=value}else{if(attribute=='id'){this.idList[value]=element}else if(attribute=='class'){attribute='className'}else if(attribute=='for')attribute='htmlFor';element[attribute]=value}};if(object.c){children=object.c instanceof Array?object.c:[object.c];if(object.n=='table'&&!(children[0].n in Set('tbody','theader','tfooter'))){element.appendChild(this.built({n:'tbody',c:children}))}else for(i=0;i<children.length;i++)if(children[i]&&(childNode=this.builtRecursive(children[i])))element.appendChild(childNode)};if('t'in object)element.appendChild(document.createTextNode(object.t))}};return element},getIdList:function(){return Object.extend({},this.idList)},getElementById:function(id){return this.idList[id]||null}})
function Popup(width,closeHandler){this.width=width;this.closeHandler=closeHandler;this.element=null;this.contentArea=null;this.visible=false;this.init()};Object.extend(Popup.prototype,{init:function(){preload('popup_close','g/if/popup/close_button.gif');preload('popup_close_hover','g/if/popup/close_button_mouseover.gif');this.element=document.createElement('div');this.element.className='trackerPopup boxCorner4';this.element.style.width=this.width+'px';this.element.appendChild(this.createCloseButton());this.contentArea=document.createElement('fieldset');this.contentArea.className='boxCorner3';this.element.appendChild(this.contentArea);addCleanupHandler(this,['element','contentArea'])},createCloseButton:function(){var img=HTMLBuilder().built({n:'img',a:{className:'close',title:'sluiten',onclick:this.closeHandler||this.close.bind(this)}});imageHoverSwap(img,'popup_close','popup_close_hover');return img},setContent:function(newContent){var c;while((c=this.contentArea.lastChild))this.contentArea.removeChild(c);if(typeof newContent=='string'){this.contentArea.innerHTML=newContent}else this.contentArea.appendChild(newContent)},show:function(){this.element.style.display='block';this.visible=true},close:function(){this.element.style.display='none';this.visible=false}})
function createQueryString(parms){var query=[];for(var parm in parms)if(parms.hasOwnProperty(parm))query.push(encodeURIComponent(parm)+'='+encodeURIComponent(parms[parm]));return query.join('&')}
function getElementsByClassName(className,nodeName,parentElement,callback){if(!nodeName)nodeName='*';if(!parentElement)parentElement=document;var results=[],regexp=/[.|+?()[\]]/.test(className),s,i=0,element;if(parentElement.getElementsByClassName&&nodeName=='*'&&!regexp){results=Array.slice(parentElement.getElementsByClassName(className),0);if(callback)results.forEach(callback)}else if(document.evaluate&&!regexp){s=document.evaluate(".//"+nodeName+"[contains(concat(' ', @class, ' '), ' "+className+" ')]",parentElement,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);while((element=s.snapshotItem(i++))){results.push(element);if(callback)callback(element)}}else{s=parentElement.getElementsByTagName(nodeName);var re=getClassRegExp(className),elementClassName;while((element=s[i++])){elementClassName=element.className;if(elementClassName.length&&(elementClassName==className||re.test(elementClassName))){results.push(element);if(callback)callback(element)}}};return results}
function is_ignorable(nod){return((nod.nodeType==3&&is_whitespace(nod.data))||nod.nodeType==8)}
function is_whitespace(string){return!/[^\t\n\r ]/.test(string)}
function first_child(par,nodeName){var res=null;if(par&&par.nodeType==1&&(res=par.firstChild))if((nodeName&&res.nodeName.toLowerCase()!=nodeName.toLowerCase())||is_ignorable(res))return node_after(res,nodeName);return res}
function last_child(par,nodeName){var res=null;if(par&&par.nodeType==1&&(res=par.lastChild))if((nodeName&&res.nodeName.toLowerCase()!=nodeName.toLowerCase())||is_ignorable(res))return node_before(res,nodeName);return res}
function node_after(sib,nodeName){if(sib)if(nodeName){nodeName=nodeName.toLowerCase();while((sib=sib.nextSibling)&&sib.nodeName.toLowerCase()!=nodeName);}else while((sib=sib.nextSibling)&&is_ignorable(sib));return sib}
function node_before(sib,nodeName){if(sib)if(nodeName){nodeName=nodeName.toLowerCase();while((sib=sib.previousSibling)&&sib.nodeName.toLowerCase()!=nodeName);}else while((sib=sib.previousSibling)&&is_ignorable(sib));return sib}
function ellipsis(root,deep){if(ellipsis.__native==undefined){ellipsis.__native=true;if(document.defaultView&&document.defaultView.getComputedStyle){var foo=document.createElement('div');foo.style.cssText='text-overflow:ellipsis;-o-text-overflow:ellipsis';if(!foo.style.cssText)ellipsis.__native=false}};if(!ellipsis.__native)if(!root||deep){getElementsByClassName('ellipsis',null,root,ellipsis_do)}else ellipsis_do(root)}
function ellipsis_do(root){var ellipsis_word=false;if(root.clientWidth){if(root.nodeName!='TD'){root.style.width=root.clientWidth+'px';root.style.position='fixed'};var s=[root],e,o;while((e=s.pop()))do{if(e.nodeType==1&&e.style.display!='none')if(document.defaultView.getComputedStyle(e,null).getPropertyValue('overflow')=='hidden'){ellipsis_overflow(e,ellipsis_word)}else{if(e!=root&&(o=e.nextSibling))s.push(o);e=e.firstChild;continue};e=e.nextSibling}while(e);root.style.position=''}}
function ellipsis_overflow(p,ellipsis_word){var w=p.clientWidth;if(w&&p.scrollWidth>w){var s=[p.lastChild],e,o,q,l;while((e=s.pop()))do{if(e.nodeType==1){if((o=e.previousSibling))s.push(o);e=e.lastChild;continue};if(e.nodeType==3&&!is_whitespace(q=e.nodeValue)){l=Math.floor((q.length*w)/p.scrollWidth)-1;if(l>0){do{e.nodeValue=q.substr(0,--l)+'...'}while(l&&(p.scrollWidth>w||(ellipsis_word&&e.nodeValue.charAt(l-1)!=' ')));if(l>0)return};e.nodeValue=''};e=e.previousSibling}while(e)}}
function addClass(element,className){if(element.className.length){var classes=getClassList(element);if(classes.indexOf(className)==-1){classes.push(className);setClassList(element,classes)}}else element.className=className}
function removeClass(element,className){var classes=getClassList(element),index;if((index=classes.indexOf(className))>-1){delete classes[index];setClassList(element,classes)}}
function replaceClass(element,oldclass,newclass){var classes=getClassList(element),index;if((index=classes.indexOf(oldclass))>-1&&classes.indexOf(newclass)==-1){classes[index]=newclass;setClassList(element,classes)}}
function toggleClass(element,class1,class2){if(hasClass(element,class1)){replaceClass(element,class1,class2)}else replaceClass(element,class2,class1)}
function hasClass(element,className){var elementClassName=element.className;return elementClassName&&elementClassName.length&&(elementClassName==className||getClassRegExp(className).test(elementClassName))}
function getClassList(element){return element.className.length?element.className.split(/\s+/):[]}
function setClassList(element,classes){element.className=classes.join(' ')}
function getClassRegExp(className){if(!(className in regExpCache))regExpCache[className]=new RegExp('(^|\\s)'+className+'(\\s|$)');return regExpCache[className]}
function getOffsetTop(el,offsetParent){var offsetTop=0;if(!offsetParent)offsetParent=null;do{offsetTop+=el.offsetTop}while((el=el.offsetParent)&&el!=offsetParent);return offsetTop}
function getOffsetLeft(el,offsetParent){var offsetLeft=0;if(!offsetParent)offsetParent=null;do{offsetLeft+=el.offsetLeft}while((el=el.offsetParent)&&el!=offsetParent);return offsetLeft}
function setRelativePosition(element,offsetElement,offsetTop,offsetLeft,minTop,minLeft){var offsetParent=null;try{offsetParent=element.offsetParent}catch(e){};var top=getOffsetTop(offsetElement,offsetParent)+offsetTop;if(minTop!==undefined&&top+(offsetParent&&getOffsetTop(offsetParent))<minTop)top=minTop;var left=getOffsetLeft(offsetElement,offsetParent)+offsetLeft;if(minLeft!==undefined&&left+(offsetParent&&getOffsetLeft(offsetParent))<minLeft)left=minLeft;element.style.top=top+'px';element.style.left=left+'px'}
function getPageDimensions(){var dE=document.documentElement||document.body;return{scrollWidth:Math.max(dE.scrollWidth,dE.clientWidth),scrollHeight:Math.max(dE.scrollHeight,dE.clientHeight),innerWidth:window.innerWidth||(dE.offsetWidth-2*(dE.clientLeft||0)),innerHeight:window.innerHeight||(dE.offsetHeight-2*(dE.clientTop||0)),availWidth:dE.clientWidth,availHeight:dE.clientHeight,offsetX:window.pageXOffset||dE.scrollLeft,offsetY:window.pageYOffset||dE.scrollTop}}
function addLinkBehaviour(root){var externalLinks=!('externalLinks'in window)||window.externalLinks,external=getClassRegExp('external'),logOutgoing=window.logOutgoing,sameDomainCheck=new RegExp('^https?://(\\w+\\.)?'+RegExp.escape(document.domain)+'(/|$)'),pricePopups=window.displayLowestPrices&&getClassRegExp('showprices:(\\d+)(:[a-z_]+)?'),shopScorePopups=window.displayShopscore&&getClassRegExp('shopscore:(\\d+)(-(\\d))?'),imageViewer=window.ImageViewer&&getClassRegExp('imageviewer(\\[(\\w+)\\])?'),thumb,src,ajaxLogin=!window.UserID&&getClassRegExp('login(:[a-z_]+)?'),c=(root||document).getElementsByTagName('a'),a,i=0,rel,href,match;while((a=c[i++]))if((rel=a.getAttribute('rel')))try{href=a.href;if((externalLinks||logOutgoing)&&(rel=='external'||external.test(rel))){if(externalLinks)a.target='_blank';if(logOutgoing&&!sameDomainCheck.test(href)&&!a.onclick)a.onclick=function(){window._gaq&&window._gaq.push(['_trackPageview','/outgoing/'+this.href.replace(/^[a-z]+:\/\/(www\.)?/,'')]);return true}};if(!is.handheld){if(pricePopups&&(match=pricePopups.exec(rel)))addPricePopupHandlers(a,match[2],match[3]?match[3].substr(1):'pw');if(shopScorePopups&&(match=shopScorePopups.exec(rel)))addShopScoreHandlers(a,match[2],match[4]);if(imageViewer&&(rel=='imageviewer'||(match=imageViewer.exec(rel)))){thumb=first_child(a,'img');src=/^http:\/\/twitpic\.com\//.test(href)?BaseURL+'ext/imageripper.dsp?url='+encodeURIComponent(href):href;ImageViewer().addImage(rel=='imageviewer'||!match[2]?'single':match[3],{anchor:a,src:src,thumbsrc:thumb&&thumb.src,caption:a.title.escapeHtml()})};if(ajaxLogin&&(match=ajaxLogin.exec(rel)))addLoginDialogHandler(a,match[2]?match[2].substr(1):'')}}catch(e){};if(!root)HTML5FormSupport();return true}
function addLoginDialogHandler(a,method){loadJS('login.js');loadCSS('login.css');if(a.onclick)a._onclick=a.onclick;a.onclick=function(){if(!window.UserID&&window.LoginDialog){var link=false;if(method!='reload')if(method!='forward'&&this.href.indexOf('/login')>-1){if((link=/[&?]location=([^&]+)/.exec(this.href)))link=decodeURIComponent(link[1])}else link=this;LoginDialog().show(link);return false};return a._onclick?a._onclick():true}}
function HTML5FormSupport(){var forms=document.forms,i=forms.length;if(i){var input=document.createElement('input'),supportsPlaceholder='placeholder'in input,supportsAutofocus='autofocus'in input,elements,focusElement,placeHolder,j,el;if(!supportsPlaceholder||!supportsAutofocus){while(i--){elements=forms[i].elements,j=elements.length;while(j--){el=elements[j];if(!supportsPlaceholder&&el.type=='text'&&(placeHolder=el.getAttribute('placeholder'))){if(el.value=='')el.value=placeHolder;addEvent(el,'focus',placeholderFunc)};if(!supportsAutofocus&&hasAttribute(el,'autofocus'))focusElement=el}};if(focusElement)focusElement.focus()}}}
function placeholderFunc(){if(this.value==this.getAttribute('placeholder')){this.value=''}else this.select()}
function checkKeyword(input){return input.value!=''&&input.value!=input.getAttribute('placeholder')}
function addPricePopupHandlers(a,productId,section){var showCollectionPopup=false;if(a.childNodes.length>1){getElementsByClassName('showprices','*',a).forEach(function(el){addPricePopupHandlers(el,productId,section)})}else{if(section=='pw_coll'){section='pw';showCollectionPopup=true};addClass(a,'pwlink');a.onmouseover=function(){displayLowestPrices(this,productId,section)};a.onmouseout=function(){hideLowestPrices(this)};if(showCollectionPopup)addCollectionPopupHandlers(a,productId)}}
function addCollectionPopupHandlers(a,productId){var collection=HTMLBuilder().built({n:'img',a:{title:'Voeg toe aan wenslijst of inventaris',alt:'add',className:'collectionpopup',width:10,height:9}}),imgData='data:image/gif;base64,R0lGODlhCgAJAJE*tPT052dnf///yH5BAEAAAMALAAAAAAKAAkAAAIXnAenBrLXFJiUioBzdtUavUGVowimaRQAOw==';preload('pw_mandje',is.ieVersion<8?'g/pw/mandje.gif':imgData.replace('*','DAD4+P'));preload('pw_mandje_hover',is.ieVersion<8?'g/pw/mandje_o.gif':imgData.replace('*','AAMAAQ'));imageHoverSwap(collection,'pw_mandje','pw_mandje_hover');collection.onclick=function(){return showAddProductToCollectionPopup(collection,productId)};a.parentNode.appendChild(collection)}
function loadCSS(fileName,media,sync){if(!loadCSS.loaded)loadCSS.loaded={};if(!(fileName in loadCSS.loaded)){loadCSS.loaded[fileName]=true;var links=document.getElementsByTagName('link'),i=links.length,style,usemin=!window.debug;while(i--){if(links[i].href.indexOf(fileName)>-1)return false;if(usemin&&links[i].href.indexOf('/general.js')>-1)usemin=links[i].href.indexOf('/min/'>-1)};if(sync){style=Ajax().sendRequest(getXmlHttpUrl('frontpage','stylesheet')+'&file='+encodeURIComponent(fileName),{method:'GET',type:'text',async:false});return style&&createStylesheet(fileName,style,media)};style=document.createElement('link');style.type='text/css';style.rel='stylesheet';style.media=media||'screen,handheld,projection';style.href=/^https?:\/\//.test(fileName)?fileName:ImgURL+'x/'+(usemin?'min/':'')+fileName;getHead().appendChild(style);return style};return false}
function createStylesheet(label,style,media,overwrite){var el,txt;if(!createStylesheet.elements)createStylesheet.elements={};if((el=createStylesheet.elements[label])){if(!overwrite)return el}else{el=document.createElement('style');el.type='text/css';el.media=media||'screen,handheld,projection';getHead().appendChild(el);createStylesheet.elements[label]=el};if(el.styleSheet){el.styleSheet.cssText=style}else{txt=document.createTextNode(style);if(el.firstChild){el.replaceChild(txt,el.firstChild)}else el.appendChild(txt)};return el}
function loadPrintStyle(cssFile){if('onbeforeprint'in window){window.onbeforeprint=function(){loadCSS(cssFile,'print',true)}}else loadCSS(cssFile,'print')}
function loadJS(fileName,callBack){if(!loadJS.loaded)loadJS.loaded={};if(!(fileName in loadJS.loaded)){loadJS.loaded[fileName]=true;var js=document.getElementsByTagName('script'),i=js.length;while(i--)if(js[i].src&&js[i].src.indexOf(fileName)>-1)return;var script=document.createElement('script');script.async=true;script.src=/^(https?:)?\/\//.test(fileName)?fileName:ImgURL+'x/'+(window.debug?'':'min/')+fileName;if(callBack)script.onload=script.onreadystatechange=function(_,isAbort){if(isAbort||!script.readyState||/loaded|complete/.test(script.readyState)){script.onload=script.onreadystatechange=null;script=undefined;if(!isAbort)callBack(true)}};js[0].parentNode.insertBefore(script,js[0])}else if(callBack)callBack(false)}
function FolderTree(id){var list=getById(id);if(list){preload('folderTreeHide','g/if/icons/folder_tree_min.png');preload('folderTreeShow','g/if/icons/folder_tree_plus.png');var subLists=list.getElementsByTagName('ul'),i=0,ul,img,li;while((ul=subLists[i++])){if((img=first_child(ul.parentNode,'img'))){img.src=getPreloadImage('folderTreeShow');img.style.cursor='pointer';img.iconId='folderTree';addEvent(img,'click',FolderTreeToggle)};ul.style.display='none'};subLists=getElementsByClassName('highlight','li',list),i=0;while((li=subLists[i++]))do{if((img=first_child(li,'img')))FolderTreeToggle.call(img);li=li.parentNode.parentNode}while(li&&li.nodeName.toLowerCase()=='li')}}
function FolderTreeToggle(){var subList=first_child(this.parentNode,'ul');if(subList)if(toggleSectionImage(this,1)){subList.style.display='none'}else{subList.style.display='block';if(!this.ellipsed){ellipsis(subList);this.ellipsed=true}}}
function getCookie(name){var cookie=getCookieContent();return name in cookie?cookie[name]:null}
function getCookieContent(){var cookie={};if(document.cookie){var items=document.cookie.split('; '),i=items.length,crumb;while(i--){crumb=items[i].split('=');cookie[crumb[0]]=crumb[1]!=undefined?unescape(crumb[1]):null}};return cookie}
function setCookie(sName,sValue,sPath,sExpires){if(sExpires instanceof Date)sExpires=sExpires.toGMTString();document.cookie=sName+'='+escape(sValue)+'; expires='+(sExpires||'Fri, 31 Dec 2099 23:59:59 GMT')+'; path='+(sPath||'/')+'; domain=.'+document.domain}
function deleteCookie(sName,sPath){setCookie(sName,'',sPath,'Thu, 01 Jan 1970 00:00:01 GMT')}
function getSessionId(){return getCookie(window.sidName||'TnetID')}
function timeDiff(starttime){return((new Date().getTime()-starttime)/1e3).toString().replace('.',',')}
function hideOldBrowserWarning(img){var expires=new Date(new Date().getTime()+90*864e5);setCookie('hideobwarning','1',null,expires);img.parentNode.style.display='none';if(window.positionTracker)positionTracker()}
function hideMed(img,time){setCookie('lastmed',time);img.parentNode.style.display='none';if(window.positionTracker)positionTracker()};var klipklapcookie={},skipcookie=true
function initSectionDisplay(){var icons=[['sectionIcon','g/bullets/arrow_down.gif','g/bullets/arrow_right.gif'],['pwSectionIcon','g/bullets/min.gif','g/bullets/plus.gif'],['pwSectionIconNew','g/bullets/table_header_arrow_down.png','g/bullets/table_header_arrow_right.png'],['fieldsetIcon','images/icons/admin_open.gif','images/icons/admin_closed.gif']],c=getCookie('klipklapcookie'),temp,i;if(c){temp=c.split(',');i=temp.length;while(i--)klipklapcookie[temp[i]]=1};var classNames=['kkRev','kk'],j=2,k,l,base,icon;while(j--){i=0;c=getElementsByClassName(classNames[j],'img');while((temp=c[i++])){addClass(temp,'pointer');temp.title='in/uitklappen';k=0;while((icon=icons[k++])){l=temp.src.indexOf(icon[1]);if(l>-1){base=temp.src.substr(0,l);temp.iconId=icon[0];preload(icon[0]+'Hide',base+icon[1]);preload(icon[0]+'Show',base+icon[2]);break}};if(j==(temp.id&&temp.id in klipklapcookie))initSectionDisplayClick(temp)}};skipcookie=false}
function initSectionDisplayClick(temp){do{if(typeof temp.onclick=='function'){temp.onclick();break}}while((temp=temp.parentNode))}
function toggleSectionImage(img,skipcookie){var hide=img.src==getPreloadImage(img.iconId+'Hide');img.src=getPreloadImage(img.iconId+(hide?'Show':'Hide'));if(img.id&&!skipcookie&&!window.skipcookie)writeKlipKlapCookie(img,hide);return hide}
function toggleSectionDisplay(img,skipcookie){var cat=getById(img.id+'List');if(cat)if(toggleSectionImage(img,skipcookie)){cat.style.display='none'}else{cat.style.display='';ellipsis(cat)}}
function toggleFieldsetDisplay(img,hideall){var hide=toggleSectionImage(img),fe=node_after(img.parentNode),fieldset=Set('dl','fieldset','table','ol');do{if(hideall||fe.nodeName.toLowerCase()in fieldset)fe.style.display=hide?'none':''}while((fe=node_after(fe)))}
function writeKlipKlapCookie(img,hide){if(img){if(hasClass(img,'kkRev'))hide=!hide;if(hide){klipklapcookie[img.id]=1}else delete klipklapcookie[img.id]};var temp=[];for(var category in klipklapcookie)if(klipklapcookie.hasOwnProperty(category))temp.push(category);setCookie('klipklapcookie',temp.join(','));if(window.positionTracker)setTimeout(function(){positionTracker();utracker_stretch()},0)}
function getXmlHttpUrl(application,type,action,queryStringExtras){var xmlHttpUrl=window.xmlHttpUrl||location.protocol+'//'+location.host+'/xmlhttp/xmlHttp.php';return xmlHttpUrl+'?application='+application+(type?'&type='+type:'')+(action?'&action='+action:'')+(queryStringExtras?'&'+queryStringExtras:'')};if(!window.XMLHttpRequest)window.XMLHttpRequest=function(){var types=['MSXML2.XMLHTTP.6.0','MSXML2.XMLHTTP.3.0'];for(var i=0;i<types.length;i++)try{return new ActiveXObject(types[i])}catch(e){};return undefined};if(!window.JSON)window.JSON={parse:function(data){if(!is_whitespace(data))try{return/^[\],:{}\s]*$/.test(data.replace(/\\["\\\/bfnrtu]/g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,''))&&eval('('+data+')')}catch(e){};throw new SyntaxError('JSON.parse')}}
function Ajax(){if(this==window)return new Ajax();if(Ajax.instance)return Ajax.instance;this.options={type:'xml',method:'GET',async:false,contentType:'application/x-www-form-urlencoded',encoding:'ISO-8859-15',nocache:false,handler:null,appendSid:false};this.requestObjectSync=null;this.requestObjectAsync=null;this.queue=[];this.busy=false;return(Ajax.instance=this)};Object.extend(Ajax.prototype,{getRequestObject:function(async,forceNewObject){var requestObjectName='requestObject'+(async?'Async':'Sync');if(this[requestObjectName]===null||forceNewObject)this[requestObjectName]=new XMLHttpRequest();return this[requestObjectName]},sendRequest:function(url,options,data){if(options.async&&this.busy){this.addToQueue(url,options,data);return true};options=Object.extend(options||{},this.options);var requestObject=this.getRequestObject(options.async,is.opera&&options.async);if(requestObject){if(options.async)this.busy=true;url+=(url.indexOf('?')==-1?'?':'&')+'output='+options.type.toLowerCase();if(!options.headers)options.headers={};if(options.method.toUpperCase()=='POST'){if(!('Content-Type'in options.headers))options.headers['Content-Type']=options.contentType+(options.encoding?'; charset='+options.encoding:'');if(data==undefined)data='';if(options.appendSid)data+=(data==''?'':'&')+'sid='+encodeURIComponent(getSessionId())}else{options.method='GET';if(data)url+='&'+data;data=null;if(options.nocache){options.headers['Cache-Control']='no-cache';url+='&nocache='+new Date().getTime()}};try{requestObject.open(options.method.toUpperCase(),url,!!options.async)}catch(e){if(url.indexOf('adType')>-1)alert('Het ophalen van data voor een nieuwe advertentie is mislukt; zorg ervoor dat je browser geen zaken blokkeert (bijvoorbeeld door een adblocker).');if(options.async)this.resetHandler(requestObject);return false};for(var header in options.headers)if(options.headers.hasOwnProperty(header))requestObject.setRequestHeader(header,options.headers[header]);if(options.async){requestObject.onreadystatechange=this.defaultHandler.bind(this,options);requestObject.send(data)}else{requestObject.send(data);return this.defaultHandler(options)};return true};return false},addToQueue:function(url,options,data){this.queue.push({url:url,options:options,data:data});this.checkQueue()},checkQueue:function(){if(!this.busy&&this.queue.length){var request=this.queue.shift();this.sendRequest(request.url,request.options,request.data)}},defaultHandler:function(options){var result=null,requestObject=this.getRequestObject(options.async);if(requestObject.readyState==4){if(!requestObject.status||(requestObject.status>=200&&requestObject.status<400)){switch(options.type.toLowerCase()){case'json':result=this.parseJSON(requestObject.responseText);break;case'xml':result=this.validateXML(requestObject);break;case'text':default:result=requestObject.responseText};if(options.handler)result=options.handler(result)};if(options.async)this.resetHandler(requestObject)};return result},resetHandler:function(requestObject){requestObject.onreadystatechange=function(){};this.busy=false;this.checkQueue()},validateXML:function(requestObject){var xmlDoc=requestObject.responseXML,documentElement=null;if(xmlDoc)try{documentElement=xmlDoc.documentElement}catch(e){};if(!documentElement&&requestObject.responseText&&window.DOMParser){var parser=new DOMParser();xmlDoc=parser.parseFromString(requestObject.responseText,'text/xml');documentElement=xmlDoc.documentElement};if(xmlDoc){if(documentElement){if(documentElement.nodeName=='parsererror'||documentElement.nodeName=='error'){if(window.debug)alert('Error in XML respons:\n'+documentElement.firstChild.nodeValue)}else return xmlDoc}else if(xmlDoc.parseError){if(window.debug)alert('Error parsing XML respons:\n'+xmlDoc.parseError.reason+'\n'+url)}else if(window.debug)alert('No valid data in XML respons')}else if(window.debug)alert('The responseXML object was empty');return false},parseJSON:function(data){try{return JSON.parse(data)}catch(e){};if(window.debug&&data!='')alert('Error parsing JSON respons: '+data);return false},stripScripts:function(html){return html.replace(/<script[^>]*>([\S\s]*?)<\/script>/gi,'')},evalScripts:function(html){return html.replace(/<script[^>]*>([\S\s]*?)<\/script>/gi,function(a,b){if(!is_whitespace(b))globalEval(b);return''})}})
function checkJsonResponse(response){if(response!==false){if('data'in response)return response.data;if('error'in response){alert(response.error);return false};if(window.debug)alert('No valid data received in JSON response')};return false}
function cancelEvent(e){e=e||window.event;if(e)if(e.preventDefault){e.preventDefault()}else if(e.cancelBubble!=undefined){if(e.keyCode)e.keyCode=0;e.returnValue=0;e.cancelBubble=true};return false}
function stopPropagation(e){if((e=e||window.event))e.stoppropagation?e.stoppropagation():e.cancelBubble=true}
function sitestat(ns_l){if(document.cookie.indexOf('ns_Cfilter')!=-1){var ns_0=document.referrer,ns_1=new Image();ns_1.src=ns_l+'&ns__t='+new Date().getTime()+(ns_0?'&ns_referrer='+escape(ns_0.replace(/\/+$/,'')):'')}}
function comScore(t){var c=getCookie('comScore'),d=document,encode=window.encodeURIComponent||escape,g=2048,i=new Image();t+=['&ns__t='+new Date().getTime(),'ns_c='+d.characterSet||d.defaultCharset||'','c8='+encode(d.title)+(c?'&'+c:''),'c7='+encode((d.location&&d.location.href)||d.URL),'c9='+encode(d.referrer)].join('&');if(t.length>g){var s=t.substr(0,g-8).lastIndexOf('&');t=(t.substring(0,s)+'&ns_cut='+encode(t.substring(s+1))).substr(0,g)};i.src=t}
function logVideoStart(fileName){if(!logVideoStart.logged)logVideoStart.logged={};if(!(fileName in logVideoStart.logged)){logVideoStart.logged[fileName]=1;sendTrackingCommand('video','f='+encodeURIComponent(fileName))}}
function sendTrackingCommand(section,parameterstring){var img=new Image();img.src=BaseURL+'ext/px?s='+section+(parameterstring?'&'+parameterstring:'')+'&r='+Math.round(Math.random()*1e8)}
function registerClickOut(shopId,shopName,cost,productId,productName,category,location,linkElement){var hadTracker=0;if(window._gaq){var orderId=new Date().getTime()+'_'+shopId+'_'+productId;window._gaq.push(['_addTrans',orderId,shopName,cost],['_addItem',orderId,productId,productName,category+(linkElement&&linkElement.isFeatured?'-Featured':''),cost,1,location],['_trackTrans']);hadTracker=1};if(window.pageviewIdentifier)location=window.pageviewIdentifier;var parameters='pid='+productId+'&sid='+shopId+'&c='+cost+'&t='+hadTracker+'&l='+location+'&rf='+encodeURIComponent(document.referrer);sendTrackingCommand('pw',parameters)}
function trackEvent(zone,type,title){if(window._gaq)window._gaq.push(['_trackEvent',zone,type,title||document.title]);return true};var openPopups=[]
function PricePopup(tableRow,useEllipsis,parentPopup,topLeft,positionOptions){if(parentPopup)this.parentPopup=parentPopup;this.offsetLeft=null;this.offsetTop=null;if(positionOptions){if('offsetLeft'in positionOptions)this.offsetLeft=positionOptions.offsetLeft;if('offsetTop'in positionOptions)this.offsetTop=positionOptions.offsetTop};this.tableRow=tableRow;this.element=null;this.contentArea=null;this.visible=false;this.useEllipsis=useEllipsis;this.initialized=false;this.blockHide=false;this.autoHide=true;this.timer=null;this.topLeft=topLeft;this.windowClickHandler=null;this.init()};Object.extend(PricePopup.prototype,{init:function(){if(window.board_script_url||window.location.href.indexOf('.tweakblogs.net/')>0)loadCSS('forum_pw.css');preload('pricePopupClose','g/balloon/pricepopup/close_button.gif');preload('pricePopupCloseHover','g/balloon/pricepopup/close_button_mouseover.gif');this.element=document.createElement('div');this.element.className='pricePopup';this.element.style.cssText='position:absolute;display:none;width:350px';var pointer=document.createElement('div');pointer.className=(this.topLeft?'pointerTopLeft':'pointerTopRight');this.element.appendChild(pointer);this.element.appendChild(this.createCloseButton());this.contentArea=document.createElement('fieldset');this.contentArea.style.width='310px';this.element.appendChild(this.contentArea);document.body.appendChild(this.element);addEvent(this.element,'mouseenter',this.block.bind(this));addEvent(this.element,'mouseleave',this.unblock.bind(this));addCleanupHandler(this,['element','tableRow'])},setContent:function(newContent){var c;while((c=this.contentArea.lastChild))this.contentArea.removeChild(c);if(typeof newContent=='string'){this.contentArea.innerHTML=newContent}else this.contentArea.appendChild(newContent);this.initialized=false},resetPosition:function(tableRow){if(tableRow)this.tableRow=tableRow;var offsetLeft;if(this.topLeft){offsetLeft=(this.offsetLeft!==null)?this.offsetLeft:-10}else offsetLeft=(this.offsetLeft!==null)?this.offsetLeft:-349;var offsetTop;offsetTop=(this.offsetTop!==null)?this.offsetTop:24;setRelativePosition(this.element,this.tableRow,this.tableRow.clientHeight+offsetTop,offsetLeft,100,20)},createCloseButton:function(){var img=HTMLBuilder().built({n:'img',a:{className:'close',title:'sluiten',onclick:this.close.bind(this,true)}});imageHoverSwap(img,'pricePopupClose','pricePopupCloseHover');return img},showDelayed:function(){if(!this.visible&&!this.timer)this.timer=setTimeout(this.show.bind(this),300)},show:function(){if(openPopups.length>0){var openPopup;while((openPopup=openPopups.pop()))openPopup.close()};this.timer=null;if(this.parentPopup&&this.parentPopup.show)this.parentPopup.show();this.element.style.display='block';this.visible=true;if(this.autoHide)openPopups.push(this);if(!this.initialized){addLinkBehaviour(this.contentArea);if(this.useEllipsis)Array.forEach(this.contentArea.getElementsByTagName('table'),function(table){addClass(table,'ellipsis');ellipsis(table)});this.initialized=true;addEvent(this.element,'click',function(e){e.stopPropagation()});if(!this.windowClickHandler){this.windowClickHandler=this.close.bind(this,true);addEvent(document,'click',this.windowClickHandler)}}},close:function(forceClose){if(!this.blockHide||forceClose){this.element.style.display='none';this.visible=false;if(this.timer)clearTimeout(this.timer);this.timer=null;if(this.windowClickHandler){removeEvent(document,'click',this.windowClickHandler);this.windowClickHandler=null}}},hideDelayed:function(timeout){if(this.visible){if(!this.blockHide&&!this.timer)this.timer=setTimeout(this.close.bind(this),timeout||1e3)}else if(this.timer)this.close(true)},block:function(){if(this.timer){clearTimeout(this.timer);this.timer=null};this.blockHide=true},unblock:function(){this.blockHide=false;if(this.autoHide)this.hideDelayed(3e3)}})
function LowestPricePopup(productId,tableRow,section){this.popup=null;this.productId=productId;this.dataRequested=false;this.section=section||'pw';this.init(tableRow)};Object.extend(LowestPricePopup.prototype,{init:function(tableRow){this.popup=new PricePopup(tableRow,true,this)},show:function(){if(!this.dataRequested){this.dataRequested=true;var ajax=new Ajax();if(ajax.getRequestObject(true)){var tabledata=ajax.sendRequest(getXmlHttpUrl('frontpage','productprices','top5')+'&productId='+this.productId+'&section='+this.section,{method:'GET',type:'text',async:false});this.popup.setContent(tabledata);this.popup.resetPosition()}}},showDelayed:function(){this.popup.showDelayed()},hideDelayed:function(){this.popup.hideDelayed()}})
function displayLowestPrices(row,productId,section){if(!row.popup)row.popup=new LowestPricePopup(productId,row,section);row.popup.showDelayed()}
function hideLowestPrices(row){if(row.popup)row.popup.hideDelayed()}
function ShorturlPopup(anchor){this.popup=null;this.anchor=anchor;this.recreate=false;this.init(anchor)};Object.extend(ShorturlPopup.prototype,{init:function(anchor){this.popup=new PricePopup(anchor,true,this,true);this.recreate=(anchor.getAttribute('data-recreate')=='1')},display:function(){var shortUrl='';if((this.recreate&&window.location.href.match(/[?#]/))||!this.anchor.href){var ajax=new Ajax();if(ajax.getRequestObject(true))shortUrl=ajax.sendRequest(getXmlHttpUrl('frontpage','shorturl','shorten')+'&baseurl='+encodeURIComponent(this.anchor.href)+'&url='+encodeURIComponent(location),{method:'GET',type:'text',async:false,appendSid:true})}else shortUrl=this.anchor.href;var textarea=HTMLBuilder().built({n:'textarea',t:shortUrl,a:{style:'width:290px;height:50px',readonly:'readonly'}}),content=HTMLBuilder().built({n:'p',c:[{n:'#text',v:'Quicklink: '},textarea]});this.popup.setContent(content);this.popup.resetPosition();this.popup.show();textarea.onfocus=function(){this.select()};textarea.focus()}})
function showShorturlPopup(anchor,event){if(!anchor.popup)anchor.popup=new ShorturlPopup(anchor);anchor.popup.display();stopPropagation(event);return false}
function showAddProductToCollectionPopup(row,productId,type){if(!window.productPopup){window.productPopup=new PricePopup(row);window.productPopup.autoHide=false};var html=Ajax().sendRequest(getXmlHttpUrl('frontpage','collections','addtocollection'),{method:'POST',type:'json',async:false,nocache:true,appendSid:true,handler:checkJsonResponse},'p='+encodeURIComponent(productId)+'&t='+encodeURIComponent(type||''));if(html){window.productPopup.setContent(Ajax().evalScripts(html));window.productPopup.resetPosition(row);window.productPopup.showDelayed();return false};return true}
function addProductToCollection(productId,collectionId,type,collname,av){var html=Ajax().sendRequest(getXmlHttpUrl('frontpage','collections','addtocollection2'),{method:'POST',type:'json',async:false,nocache:true,appendSid:true,handler:checkJsonResponse},'p='+encodeURIComponent(productId)+'&c='+encodeURIComponent(collectionId)+'&t='+encodeURIComponent(type||'')+'&cn='+encodeURIComponent(collname||'')+'&av='+encodeURIComponent(av));if(window.productPopup)window.productPopup.setContent(html)}
function submitAddProductPopupForm(el,type){var invId=0;if(el.elements['c'])if(el.elements['c'].options){invId=el.elements['c'].options[el.elements['c'].selectedIndex].value}else if(el.elements['c'].value){invId=el.elements['c'].value}else for(var i=0;i<el.elements['c'].length;i++)if(el.elements['c'][i].checked)invId=el.elements['c'][i].value;addProductToCollection(el.elements['productId'].value,invId,type,el.elements['cn'].value,el.elements['av'].type=='checkbox'?(el.elements['av'].checked?1:0):el.elements['av'].value);return false}
function checkEmAll(checkbox){var el=checkbox.form.elements,i=el.length;while(i--)if(el[i].type=='checkbox'&&el[i].name!='checkem')el[i].checked=checkbox.checked}
function parseGetString(string){var component=string.indexOf('#');if(component>-1)string=string.substr(0,component);var components=string.split('&'),i=components.length,get={};while(i--){component=components[i].split('=');get[component[0]]=component.length>1?component[1]:''};return get}
function ModalDialog(){if(this==window)return new ModalDialog();if(ModalDialog.instance)return ModalDialog.instance;this.overlay=null;this.dialog=null;this.dialogActive=false;this.closeByButtonOnly=false;return(ModalDialog.instance=this)};Object.extend(ModalDialog.prototype,{init:function(){this.overlay=document.createElement('div');this.overlay.id='modalOverlay';document.body.appendChild(this.overlay);this.dialog=document.createElement('div');this.dialog.id='modalDialog';document.body.appendChild(this.dialog);addEvent(document,'click',this.hide.bind(this));addEvent(window,'resize',this.setDialogPosition.bind(this));addCleanupHandler(this,['dialog','overlay'])},show:function(html,closeByButtonOnly){this.closeByButtonOnly=!!closeByButtonOnly;if(!this.dialogActive){this.dialogActive=true;if(!this.overlay)this.init();this.setDialogPosition();this.overlay.style.display='block';addEvent(document,'keydown',this.keyHandler.bind(this))};this.clearContent();if(typeof html=='string'){this.dialog.innerHTML=Ajax().evalScripts(html)}else this.dialog.appendChild(html);this.dialog.style.display='block'},setDialogPosition:function(){if(this.dialogActive){var page=getPageDimensions();this.overlay.style.width=page.scrollWidth+'px';this.overlay.style.height=page.scrollHeight+'px';this.dialog.style.left=page.offsetX+'px';this.dialog.style.top=Math.round(page.offsetY+(page.innerHeight/10))+'px'}},hide:function(e){if(this.dialogActive){var target=e&&(e.target||e.srcElement);if(!target||(target.id&&target.id=='closeImage'||(!this.closeByButtonOnly&&target.id in Set('modalOverlay','modalDialog')))){this.clearContent();this.dialog.style.display='none';this.overlay.style.display='none';removeEvent(document,'keydown',this.keyHandler.bind(this));this.dialogActive=false};if(e)e.stopPropagation()}},keyHandler:function(e){if(e.keyCode==27&&!this.closeByButtonOnly)this.hide()},clearContent:function(){var c;while((c=this.dialog.lastChild))this.dialog.removeChild(c)}})