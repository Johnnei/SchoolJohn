function initJobSearchForm(form,removeDefaultValueOnFocus){if(!window.UserID){loadJS('login.js');loadCSS('login.css')};addClass(form,'jsEnabled');var elements=form.elements,el,i=0;while((el=elements[i++]))if(el.type=='text'){if(el.defaultValue)if(removeDefaultValueOnFocus){el.onfocus=function(){this.value==this.defaultValue?this.value='':this.select()}}else el.onfocus=function(){this.select()};if(window.Suggest&&hasClass(el,'suggest'))new Suggest(el)};getElementsByClassName('hide','label',form,function(el){el.onclick=toggleJobSearchFormItem})}
function toggleJobSearchFormItem(){var showLoginDialog=false,el;if(!window.UserID&&this.className=='hide'&&window.LoginDialog){var el=this.parentNode;do{if(hasClass(el,'jobSearchItem')){showLoginDialog=hasClass(el,'storeItem');break}}while((el=el.parentNode))};if(showLoginDialog){el=this;LoginDialog().show({nodeName:'A',_onclick:function(){el.className='show';var form=document.forms['jobSearch'];if(form)form.elements['description'].focus();return false}})}else this.className=this.className=='hide'?'show':'hide'}
function fillCurrentSelection(el){var values=[];switch(el.tagName.toLowerCase()){case'select':var o=el.options,i=0;for(var o=el.options,i=0;i<o.length;i++)if(o[i].selected)values.push(o[i].text);break;case'input':switch(el.type.toLowerCase()){case'checkbox':case'radio':for(var o=el.form.elements[el.name],i=0;i<o.length;i++)if(o[i].checked)values.push(o[i].value.toUpperCase());break};break};var div=node_after(el.parentNode,'div');if(div&&div.className!='currentSelection')div=null;if(!values.length){if(div)div.parentNode.removeChild(div)}else{if(!div){div=document.createElement('div');div.className='currentSelection';el.parentNode.parentNode.insertBefore(div,el.parentNode.nextSibling)}else while(div.hasChildNodes())div.removeChild(div.lastChild);div.appendChild(document.createTextNode(values.join(', ')))}};var hideJobRowOnRemove=false
function submitStoreSearch(form){if(form.elements['description'].value==''){alert('Je hebt geen omschrijving opgegegeven voor je zoekopdracht')}else{form.action=BaseURL+'ext/jobs/?action=storeSearch';form.method='POST';form.submit()};return false}
function setInputValue(el,value){if(el.value=='')el.value=value;setStoreSearchDesc(el)}
function setStoreSearchDesc(el){document.forms['jobSearch'].elements['newShowInTracker'].disabled=el.value==''}
function joblistRowHover(jobId,action,style){var elHead=document.getElementById('tr-head-'+jobId),elSub=document.getElementById('tr-sub-'+jobId);if(elHead&&elSub)if(action=='hover'){elHead.className='hover';elSub.className='hover'}else if(style=='dark'){elHead.className='darkTop';elSub.className='dark'}else{elHead.className='lightTop';elSub.className='light'}}
function jobBookmarkBalloon(jobId,action,displayMode,position,e){var el=document.getElementById('jobsPopup');if(position=='iolink'){var elIcon=document.getElementById('ioJobBookmark-'+jobId)}else var elIcon=document.getElementById('diskIcon-'+jobId);if(!el){el=document.createElement('div');el.id='jobsPopup';document.body.appendChild(el)};setRelativePosition(el,elIcon,19,-165);if(el){if(action=='remove'){var actionLink='removeBookmark',actionImg='disk_trash_ani',actionMessage='verwijderd uit';if(hideJobRowOnRemove){setTimeout('hideJobRow(\''+jobId+'\')',4e3)}else setTimeout('setJobBookmarkIcon(\''+jobId+'\', \'add\', \''+displayMode+'\', \''+position+'\')',1e3)}else{var actionLink='addBookmark',actionImg='disk_ani',actionMessage='toegevoegd aan';setTimeout('setJobBookmarkIcon(\''+jobId+'\', \'remove\', \''+displayMode+'\', \''+position+'\')',1e3)};var rand=Math.round(Math.random()*1e4);el.innerHTML='<div class="simplePopup"><div class="simplePopupContent"><img src="g/if/popup/close_button.gif" onmouseover="this.src=\'g/if/popup/close_button_mouseover.gif\'" onmouseout="this.src=\'g/if/popup/close_button.gif\'" class="closeButton" onclick="document.getElementById(\'jobsPopup\').style.visibility=\'hidden\'" title="Sluiten"><h4>Vacature bookmarken</h4><p><img src="g/icons/'+actionImg+'.gif" width="21" height="13" border="0" alt=""> Vacature '+actionMessage+' bookmarks in Job Manager... <img src="ext/jobs.dsp?action='+actionLink+'&jobId='+jobId+'&rand='+rand+'" width="1" height="1" border="0" alt=""></p></div></div>';el.style.visibility='visible';setTimeout("document.getElementById(\'jobsPopup\').style.visibility=\'hidden\'",4e3)}}
function hideJobRow(jobId){var elHead=document.getElementById('tr-head-'+jobId),elSub=document.getElementById('tr-sub-'+jobId);if(elHead&&elSub){elHead.style.display='none';elSub.style.display='none'}}
function getBookmarkHref(jobId,action,displayMode,position,image,desc){return image+'<a href="javascript:void(null)" onclick="jobsBookmark(\''+(action=='add'?'store':'remove')+'\', \''+jobId+'\'); return false;">'+desc+'</a>'}
function setJobBookmarkIcon(jobId,action,displayMode,position){if(!window.UserID){loadJS('rsa.js');loadJS('md5.js');loadCSS('login.css')};var el,desc,image,className;if(action=='remove'){desc=(displayMode=='full'?'Vacature uit bookmarks verwijderen':'');image='<img src="'+ImgURL+'g/if/icons/delete.png" alt="Vacature uit bookmarks verwijderen" title="Vacature uit bookmarks verwijderen">';className='delete'}else{desc=(displayMode=='full'?'Vacature opslaan':'');image='<img src="'+ImgURL+'g/if/icons/add.png" alt="Vacature bookmarken" title="Vacature bookmarken">';className='add'};if((el=document.getElementById('ioJobBookmark-'+jobId))){el.className=className;el.innerHTML=getBookmarkHref(jobId,action,displayMode,'iolink','',desc)};if((el=document.getElementById('diskIcon-'+jobId)))el.innerHTML=getBookmarkHref(jobId,action,displayMode,'',image,desc)}
function jobApply(elApplyLink,jobId,targetAddon,gaus){if(window._gaq){var el=elApplyLink,jobTracker=window._gat&&window._gat._getTrackerByName('j');while((el=el.parentNode))if(el.className=='content'||el.className=='sidebar'){window._gaq.push(['j._trackEvent','Jobs','apply'+el.className,document.title]);break};window._gaq.push(['j._trackPageview','/jobs/vacature/'+jobId+'/'+targetAddon+(gaus?'?gaus='+gaus:'')]);if(jobTracker){elApplyLink.__href=elApplyLink.__href||elApplyLink.href;elApplyLink.href=jobTracker._getLinkerUrl(elApplyLink.__href)};if(!elApplyLink.target){setTimeout('window.location.href="'+elApplyLink.href+'"',100);return false}};return true}
function jobColumnSizer(){var vacature=document.getElementById('vacatureContent');if(vacature){var w=vacature.scrollWidth;if(w>vacature.clientWidth){var jobDesc=vacature.parentNode,overSize=document.createElement('div');overSize.style.height=jobDesc.clientHeight+'px';jobDesc.parentNode.insertBefore(overSize,jobDesc);overSize.appendChild(jobDesc);var sizer=document.createElement('div');sizer.id='sizer';sizer.title='Klik hier om de vacature in- of uit te klappen';sizer.onclick=function(){if(overSize.className==''){jobDesc.style.width=w+'px';overSize.className='overSize'}else{jobDesc.style.width='auto';overSize.className=''}};jobDesc.insertBefore(sizer,jobDesc.firstChild)}}}
function jobsBookmark(type,jobId){if(type=='store'||type=='remove')if(!window.UserID&&window.LoginDialog){LoginDialog().show({nodeName:'A',_onclick:function(){return jobsBookmark(type,jobId)}})}else Ajax().sendRequest(getXmlHttpUrl('frontpage','jobsBookmark',type),{handler:loadJobBookmark,type:'json',method:'POST',appendSid:true},'jobId='+encodeURIComponent(jobId));return false}
function loadJobBookmark(response){if(response.data){var jobId=response.data.jobId;if(jobId)switch(response.data.state){case'removed':setJobBookmarkIcon(jobId,'add','full','');var el=document.getElementById("storedJob-"+jobId);if(el){var className=el.className,oldEl=el;while((el=el.nextSibling))if(el.nodeType==1&&el.nodeName=='LI'){el.className=className;className=(className=='odd')?'even':'odd'};oldEl.parentNode.removeChild(oldEl);var sideBar=getById('storedJobsSidebar');if(sideBar.getElementsByTagName('li').length==0)sideBar.style.display='none'};break;case'stored':setJobBookmarkIcon(jobId,'remove','full','');var sideBar=getById('storedJobsSidebar'),liItems=sideBar.getElementsByTagName('li');if(liItems.length==0)sideBar.style.display='';var jobData=response.data.jobData,link=document.createElement('a');link.href=jobData.companylink;link.appendChild(document.createTextNode(jobData.company));var links=[link];if('location'in jobData){if('locationlink'in jobData){link=document.createElement('a');link.href=jobData.locationlink;link.appendChild(document.createTextNode(jobData.location))}else{link=document.createElement('span');link.title=jobData.location;link.appendChild(document.createTextNode('Diverse'))};links.push(document.createTextNode(', '),link)};var el=HTMLBuilder().built({n:'li',a:{className:(liItems.length%2?'even':'odd'),id:'storedJob-'+jobId},c:[{n:'div',a:{style:'float:right'},c:{n:'img',a:{src:ImgURL+'g/if/icons/delete.png',onclick:'jobsBookmark("remove", "'+jobId+'")',style:'cursor:pointer',title:'Verwijder deze opgeslagen vacature',alt:'delete'}}},{n:'p',a:{className:'jobtitle ellipsis',style:'margin-right:20px'},c:{n:'a',a:{href:jobData.joblink,title:jobData.title},t:jobData.title}},{n:'p',c:links}]});sideBar.getElementsByTagName('ul')[0].appendChild(el);ellipsis(el);break;case'store_error':alert('Het opslaan van deze vacature is niet gelukt, waarschijnlijk was deze al toegevoegd.');break;case'remove_error':alert('Het verwijderen van deze bookmrk is niet gelukt, waarschijnlijk was nooit toegevoegd geweest, of je hebt deze al eerder verwijderd.');break}}else if(response.error)alert(response.error)}